{% extends 'appointment_row.html' %}{% load appointment_tags %}

{% block appointment_status_column %}
<td>
<A href="{{ appointment.get_absolute_url }}?next=dashboard_url&dashboard_type={{ dashboard_type }}&registered_subject={{registered_subject.pk}}&household_structure_member={{ household_structure_member }}">
    {{ appointment.get_appt_status_display }}
    {% if appointment.appt_status == 'incomplete'%}<font color="red">*</font>{% endif %}
    {% if appointment.appt_status == 'in_progress'%}<font color="green">*</font>{% endif %}    
</A> {% if appointment.appt_status == 'incomplete'%}&nbsp;{% continuation_appointment_anchor appointment dashboard_type extra_url_context%}{% endif %}
</td>
{% endblock appointment_status_column %}


{% block show_column %}
    {% if appointment_visit_report %}
        {% if appointment.visit_definition.code == visit_code and appointment.visit_instance == visit_instance %}
            <td><A href="{% url dashboard_url dashboard_type=dashboard_type household_structure_member=household_structure_member survey=survey.survey_slug %}">show appointments</A></td>
        {% else %}
            <td><A href="{% url dashboard_visit_url dashboard_type=dashboard_type visit_code=appointment.visit_definition.code visit_instance=appointment.visit_instance household_structure_member=household_structure_member survey=survey.survey_slug %}">show entry forms</A></td>                    
        {% endif %}
    {% else %}
        {% if appointment.appt_status == 'cancelled' %}
            <td>&nbsp;</td>
        {% else %}
            <td><A href="{{ visit_model_add_url }}?next=dashboard_url&dashboard_type={{ dashboard_type }}&subject_identifier={{ subject_identifier }}&appointment={{ appointment.pk }}{{ extra_url_context }}">add Visit Report for for {{ appointment.visit_definition.code }}.{{ appointment.visit_instance }}</A></td>
        {% endif%}                    
    {% endif%}

{% endblock show_column %}
