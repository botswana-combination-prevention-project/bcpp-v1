{% extends "section.html"%}

{% block breadcrumbs %}

    <div class="breadcrumbs">
        <a href="/{{ home }}">Home</a>
        &rsaquo; Synchronize with Community Server
    </div>
    
{% endblock %}


{% block content %}


<P>You are {{ hostname }}.</P>
<P>Your locally generated transactions can be found <A href="/admin/bhp_sync/outgoingtransaction/">here</A></P>
<p><A href="/mochudi_map/">View mochudi map</A></p>
<A href="/admin/bhp_sync/producer/">Producers</A>

<table>
<thead>
<th></th>
<th>Producer</th>
<th>Sync URL</th>
<th>Transactions</th>
{% if show_checkin_link %}<th>Checkin URL</th>{% endif %}
<th>Direct URL</th>
<th>Last Sync</th>
<th>Status</th>
</thead>
<tbody>
{% for producer in producers %}

    <tr>
    <td>{{ forloop.counter }}.&nbsp;</td>
    <td>{{ producer.name }}</td>
    <td><A href="/bhp_sync/consume/{{ producer.name }}/">synchronize with server</A></td>
    <td><A href="{{ producer.url }}admin/bhp_sync/outgoingtransaction/?is_consumed__exact=0&producer={{ producer.name }}">producer outgoing transactions</A></td>    
{% if show_checkin_link %}
<td><A href="/{{ CHECKOUT_APP }}/checkin/{{ producer.name }}/">Check in netbook</A></td>
<td><A href="/admin/{{ CHECKOUT_APP }}/hbcdispatch/?netbook__id__exact={{ producer.id }}">Dispatch households</A></td>
{% endif %}
    <td>{{ producer.url }}</td>
    <td>{{ producer.sync_datetime|date:"Y-m-d H:i" }} </td>
    <td><div style="{% if producer.sync_status == 'OK' %}color:green;{% endif%}{% if producer.sync_status == 'Error' %}color:red;{% endif%}">{{ producer.sync_status }}</div></td>        
    </tr> 

{% endfor %}
</tbody>
<table>

{% endblock content %}
